# Commands để tạo user test trong Django shell

# Mở Django shell:
cd D:\dbpsports\backend
python manage.py shell

# Trong Django shell, chạy các lệnh sau:

from django.contrib.auth.models import User
from users.models import Profile, Role

# Tạo user
user = User.objects.create_user(
    username='testuser',
    email='test@example.com', 
    password='test123',
    first_name='Test',
    last_name='User'
)

# Tạo profile (sẽ tự động tạo khi gọi user.profile)
profile = user.profile

# Thêm vai trò MEDIA
try:
    media_role = Role.objects.get(id='MEDIA')
    profile.roles.add(media_role)
    print("Đã thêm vai trò MEDIA")
except:
    print("Không tìm thấy vai trò MEDIA")

# Kiểm tra
print(f"User: {user.username}")
print(f"Roles: {list(profile.roles.values_list('id', flat=True))}")

# Thoát shell
exit()
