{% extends 'base.html' %}
{% load static %}

{% block title %}Thông Tin Thanh Toán - DBP Sports{% endblock %}

{% block extra_css %}
<style>
:root {
  --primary: #dc2626;
  --primary-dark: #b91c1c;
  --secondary: #6b7280;
  --success: #16a34a;
  --danger: #dc2626;
  --warning: #f59e0b;
  --info: #0ea5e9;
  --light: #f8fafc;
  --dark: #1f2937;
  --gold: #fbbf24;
  --gradient-primary: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  --gradient-hero: linear-gradient(135deg, #f59e0b 0%, #dc2626 50%, #b91c1c 100%);
  --gradient-sunset: linear-gradient(135deg, #fbbf24 0%, #f59e0b 25%, #dc2626 75%, #991b1b 100%);
  --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
  --shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
  --border-radius: 0.5rem;
  --border-radius-lg: 1rem;
}

/* Hero Section - Đồng bộ với shop */
.payment-hero-section {
  background: var(--gradient-sunset);
  color: white;
  padding: 4rem 0;
  position: relative;
  overflow: hidden;
  margin-bottom: 3rem;
}

.payment-hero-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 200" fill="rgba(0,0,0,0.1)"><path d="M0,200 Q250,100 500,150 T1000,100 L1000,200 Z"/></svg>');
  background-size: cover;
  background-position: bottom;
}

.back-to-shop {
  position: absolute;
  top: 20px;
  left: 20px;
  z-index: 10;
}

.payment-hero-content {
  position: relative;
  z-index: 2;
  color: white;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
}

.payment-hero-title {
  font-size: 3.5rem;
  font-weight: 900;
  margin-bottom: 1rem;
  text-shadow: 0 4px 8px rgba(0,0,0,0.5);
  background: linear-gradient(45deg, #ffffff, #fbbf24);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.payment-hero-subtitle {
  font-size: 1.25rem;
  margin-bottom: 2rem;
  opacity: 0.95;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  font-weight: 300;
}

.payment-hero-badge {
  display: inline-block;
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.2);
  padding: 0.5rem 1.5rem;
  border-radius: 25px;
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 2rem;
  backdrop-filter: blur(15px);
  color: white;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

/* Section Titles - Đồng bộ với shop */
.section-title {
  font-size: 2.5rem;
  font-weight: 700;
  text-align: center;
  margin-bottom: 3rem;
  color: var(--dark);
  position: relative;
}

.section-title::after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 4px;
  background: var(--gradient-primary);
  border-radius: 2px;
}

/* Payment Methods Grid */
.payment-methods {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 2rem;
  margin-bottom: 4rem;
}

.payment-method {
  background: white;
  border-radius: var(--border-radius-lg);
  padding: 2rem;
  transition: all 0.3s ease;
  border: 1px solid rgba(0,0,0,0.05);
  height: 100%;
  position: relative;
  overflow: hidden;
}

.payment-method::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-primary);
}

.payment-method:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.payment-method h3 {
  color: var(--primary);
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 1.5rem;
  font-weight: 700;
}

.payment-method .icon {
  font-size: 1.75rem;
  color: var(--primary);
  width: 40px;
  height: 40px;
  background: rgba(220, 38, 38, 0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Payment Steps */
.payment-steps {
  background: var(--light);
  border-radius: var(--border-radius-lg);
  padding: 3rem;
  margin-bottom: 4rem;
}

.step {
  display: flex;
  align-items: center;
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: white;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-sm);
  transition: all 0.3s ease;
  border-left: 4px solid var(--primary);
}

.step:hover {
  transform: translateX(5px);
  box-shadow: var(--shadow);
}

.step-number {
  background: var(--gradient-primary);
  color: white;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1.25rem;
  margin-right: 1.5rem;
  flex-shrink: 0;
  box-shadow: var(--shadow);
}

.step h5 {
  color: var(--dark);
  font-weight: 700;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.step p {
  color: var(--secondary);
  margin: 0;
  line-height: 1.6;
}

/* Contact Info */
.contact-info {
  background: white;
  border-radius: var(--border-radius-lg);
  padding: 3rem;
  box-shadow: var(--shadow);
  margin-bottom: 3rem;
}

.contact-item {
  display: flex;
  align-items: center;
  margin-bottom: 1.5rem;
  padding: 1.5rem;
  background: var(--light);
  border-radius: var(--border-radius);
  transition: all 0.3s ease;
  border-left: 4px solid var(--primary);
}

.contact-item:hover {
  transform: translateX(5px);
  background: rgba(220, 38, 38, 0.05);
}

.contact-item .icon {
  font-size: 1.75rem;
  color: var(--primary);
  margin-right: 1.5rem;
  width: 50px;
  height: 50px;
  background: rgba(220, 38, 38, 0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.contact-item strong {
  color: var(--dark);
  font-weight: 700;
}

/* Info Boxes */
.info-box {
  border-radius: var(--border-radius);
  padding: 2rem;
  margin: 2rem 0;
  border-left: 4px solid;
}

.warning-box {
  background: #fff3cd;
  border-color: #f59e0b;
  color: #92400e;
}

.success-box {
  background: #d1fae5;
  border-color: #16a34a;
  color: #065f46;
}

.info-box h4 {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
  font-weight: 700;
}

.info-box .icon {
  font-size: 1.5rem;
}

.info-box ul {
  margin: 0;
  padding-left: 1.5rem;
}

.info-box li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* Call to Action */
.cta-section {
  background: var(--light);
  padding: 4rem 0;
  margin-top: 3rem;
}

.cta-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
  margin-top: 2rem;
}

.btn-cta {
  padding: 1rem 2rem;
  border-radius: 50px;
  font-weight: 700;
  font-size: 1.1rem;
  transition: all 0.3s ease;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 200px;
  justify-content: center;
}

.btn-cta-primary {
  background: var(--gradient-primary);
  color: white;
  border: none;
}

.btn-cta-primary:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  color: white;
}

.btn-cta-outline {
  background: transparent;
  color: var(--primary);
  border: 2px solid var(--primary);
}

.btn-cta-outline:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-2px);
}

/* Responsive */
@media (max-width: 768px) {
  .payment-hero-title {
    font-size: 2.5rem;
  }
  
  .payment-hero-subtitle {
    font-size: 1rem;
  }
  
  .section-title {
    font-size: 2rem;
  }
  
  .payment-methods {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  .payment-method {
    padding: 1.5rem;
  }
  
  .payment-steps {
    padding: 2rem;
  }
  
  .step {
    flex-direction: column;
    text-align: center;
    padding: 1rem;
  }
  
  .step-number {
    margin-right: 0;
    margin-bottom: 1rem;
  }
  
  .cta-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .btn-cta {
    width: 100%;
    max-width: 300px;
  }
}
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="payment-hero-section">
  <div class="container">
    <!-- Back to Shop Button -->
    <div class="back-to-shop">
      <a href="{% url 'shop:home' %}" class="btn btn-outline-light" style="display: flex !important; align-items: center !important;">
        <span style="font-size: 1rem !important; color: inherit !important; display: inline-block !important; visibility: visible !important; opacity: 1 !important; margin-right: 0.5rem !important;">←</span>
        Quay lại shop
      </a>
    </div>
    
    <div class="row justify-content-center text-center">
      <div class="col-lg-8">
        <div class="payment-hero-content">
          <div class="payment-hero-badge">
            <i class="fas fa-shield-alt me-2"></i>
            THANH TOÁN AN TOÀN & BẢO MẬT
          </div>
          <h1 class="payment-hero-title">
            <i class="fas fa-credit-card me-3"></i>
            Thông Tin Thanh Toán
          </h1>
          <p class="payment-hero-subtitle">
            Hướng dẫn chi tiết các phương thức thanh toán và quy trình đặt hàng tại DBP Sports
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="container">
  <!-- Phương thức thanh toán -->
  <div class="row">
    <div class="col-12">
      <h2 class="section-title">
        <i class="fas fa-wallet me-2"></i>
        Phương Thức Thanh Toán
      </h2>
    </div>
  </div>

  <div class="payment-methods">
    {% for payment_method in payment_methods %}
    <div class="payment-method">
      <h3>
        <i class="{{ payment_method.icon }} icon"></i>
        {{ payment_method.name }}
      </h3>
      {% if payment_method.description %}
      <p class="text-muted mb-3">
        {{ payment_method.description }}
      </p>
      {% endif %}
      
      {% if payment_method.payment_type == 'bank_transfer' %}
        <div class="contact-info">
          <h5 class="mb-3">Thông tin tài khoản:</h5>
          {% for bank_account in payment_method.bank_accounts.all %}
          <div class="contact-item">
            <i class="fas fa-university icon"></i>
            <div>
              <strong>Ngân hàng:</strong> {{ bank_account.bank_name }}<br>
              <strong>Chủ tài khoản:</strong> {{ bank_account.account_holder }}<br>
              <strong>Số tài khoản:</strong> {{ bank_account.account_number }}
              {% if bank_account.branch %}<br><strong>Chi nhánh:</strong> {{ bank_account.branch }}{% endif %}
              {% if bank_account.qr_code %}
              <div class="qr-code mt-2">
                <img src="{{ bank_account.qr_code.url }}" alt="QR Code {{ bank_account.bank_name }}" style="max-width: 150px;">
              </div>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
      {% elif payment_method.payment_type == 'e_wallet' %}
        <div class="contact-info">
          {% for ewallet_account in payment_method.ewallet_accounts.all %}
          <div class="contact-item">
            <i class="{{ payment_method.icon }} icon"></i>
            <div>
              <strong>{{ ewallet_account.wallet_name }}:</strong> {{ ewallet_account.account_info }}
              {% if ewallet_account.qr_code %}
              <div class="qr-code mt-2">
                <img src="{{ ewallet_account.qr_code.url }}" alt="QR Code {{ ewallet_account.wallet_name }}" style="max-width: 150px;">
              </div>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
      {% elif payment_method.payment_type == 'cod' %}
        <div class="success-box info-box">
          <h4>
            <i class="fas fa-check-circle icon"></i>
            Thông Tin COD
          </h4>
          <ul>
            <li><strong>Phí COD:</strong> Miễn phí</li>
            <li><strong>Phạm vi:</strong> Toàn quốc</li>
            <li><strong>Thời gian:</strong> 1-3 ngày làm việc</li>
          </ul>
        </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>

  <!-- Quy trình đặt hàng -->
  <div class="payment-steps">
    <h2 class="section-title">
      <i class="fas fa-list-ol me-2"></i>
      Quy Trình Đặt Hàng
    </h2>
    
    {% for step in payment_steps %}
    <div class="step">
      <div class="step-number">{{ forloop.counter }}</div>
      <div>
        <h5>{{ step.title }}</h5>
        <p class="text-muted mb-0">{{ step.description }}</p>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Thông tin liên hệ -->
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="contact-info">
        <h2 class="section-title">
          <i class="fas fa-headset me-2"></i>
          Hỗ Trợ Khách Hàng
        </h2>
        
        {% for contact in contact_infos %}
        <div class="contact-item">
          <i class="{{ contact.icon }} icon"></i>
          <div>
            <strong>{{ contact.name }}:</strong> {{ contact.value }}
            {% if contact.description %}<br><strong>Thông tin:</strong> {{ contact.description }}{% endif %}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Chính sách thanh toán -->
  {% for policy in payment_policies %}
  <div class="{% if policy.policy_type == 'warning' %}warning-box{% elif policy.policy_type == 'success' %}success-box{% else %}info-box{% endif %} info-box">
    <h4>
      <i class="{{ policy.icon }} icon"></i>
      {{ policy.title }}
    </h4>
    <div>{{ policy.content|linebreaks }}</div>
  </div>
  {% endfor %}
</div>

<!-- Call to Action -->
<section class="cta-section">
  <div class="container text-center">
    <h3 class="mb-4">Cần Hỗ Trợ Thêm?</h3>
    <p class="lead mb-4">Đội ngũ chăm sóc khách hàng của chúng tôi luôn sẵn sàng hỗ trợ bạn</p>
    <div class="cta-buttons">
      <a href="tel:19001234" class="btn-cta btn-cta-primary">
        <i class="fas fa-phone"></i>
        Gọi Ngay: 1900 1234
      </a>
      <a href="https://m.me/dbpsports" target="_blank" class="btn-cta btn-cta-outline">
        <i class="fab fa-facebook-messenger"></i>
        Chat Facebook
      </a>
      <a href="https://zalo.me/0901234567" target="_blank" class="btn-cta btn-cta-outline">
        <i class="fab fa-zalo"></i>
        Chat Zalo
      </a>
    </div>
  </div>
</section>
{% endblock %}
