{% extends 'emails/base_email.html' %}
{% load shop_filters %}

{% block title %}ÄÆ¡n hÃ ng má»›i #{{ order.order_number }} - DBP Sports{% endblock %}

{% block header_subtitle %}ThÃ´ng bÃ¡o tá»« há»‡ thá»‘ng{% endblock %}

{% block content %}
<div class="alert-box">
    <h2>ğŸ”” CÃ³ Ä‘Æ¡n hÃ ng má»›i cáº§n xá»­ lÃ½!</h2>
    <p>ÄÆ¡n hÃ ng #{{ order.order_number }} tá»« {{ order.customer_name }}</p>
</div>

<p style="font-size: 16px; color: #374151;">
    KÃ­nh gá»­i Quáº£n trá»‹ viÃªn,
</p>

<p style="color: #6b7280; line-height: 1.8;">
    CÃ³ má»™t Ä‘Æ¡n hÃ ng má»›i tá»« khÃ¡ch hÃ ng <strong>{{ order.customer_name }}</strong> cáº§n Ä‘Æ°á»£c xá»­ lÃ½. 
    Vui lÃ²ng kiá»ƒm tra vÃ  xá»­ lÃ½ Ä‘Æ¡n hÃ ng nÃ y.
</p>

<div class="info-box">
    <h3>ğŸ“‹ ThÃ´ng tin Ä‘Æ¡n hÃ ng</h3>
    <div class="info-row">
        <span class="info-label">MÃ£ Ä‘Æ¡n hÃ ng:</span>
        <span class="info-value"><strong>{{ order.order_number }}</strong></span>
    </div>
    <div class="info-row">
        <span class="info-label">NgÃ y Ä‘áº·t:</span>
        <span class="info-value">{{ order.created_at|date:"d/m/Y H:i" }}</span>
    </div>
    <div class="info-row">
        <span class="info-label">Tráº¡ng thÃ¡i:</span>
        <span class="info-value"><span class="status-badge">{{ order.get_status_display }}</span></span>
    </div>
    <div class="info-row">
        <span class="info-label">Tráº¡ng thÃ¡i thanh toÃ¡n:</span>
        <span class="info-value">{{ order.get_payment_status_display }}</span>
    </div>
    <div class="info-row">
        <span class="info-label">PhÆ°Æ¡ng thá»©c thanh toÃ¡n:</span>
        <span class="info-value">{{ order.get_payment_method_display }}</span>
    </div>
</div>

<div class="info-box">
    <h3>ğŸ‘¤ ThÃ´ng tin khÃ¡ch hÃ ng</h3>
    <div class="info-row">
        <span class="info-label">TÃªn:</span>
        <span class="info-value"><strong>{{ order.customer_name }}</strong></span>
    </div>
    <div class="info-row">
        <span class="info-label">Email:</span>
        <span class="info-value">{{ order.customer_email }}</span>
    </div>
    <div class="info-row">
        <span class="info-label">Äiá»‡n thoáº¡i:</span>
        <span class="info-value">{{ order.customer_phone }}</span>
    </div>
    <div class="info-row">
        <span class="info-label">Äá»‹a chá»‰:</span>
        <span class="info-value">{{ order.shipping_address }}, {{ order.shipping_district }}, {{ order.shipping_city }}</span>
    </div>
</div>

<div class="info-box">
    <h3>ğŸ›ï¸ Sáº£n pháº©m</h3>
    {% for item in order.items.all %}
    <div style="border-bottom: 1px solid #e5e7eb; padding: 15px 0;">
        <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">{{ item.product.name }}</div>
        <div style="color: #6b7280; font-size: 14px;">
            Sá»‘ lÆ°á»£ng: {{ item.quantity }} Ã— {{ item.price|floatformat:0|vnd }}Ä‘ = 
            <strong>{{ item.total_price|floatformat:0|vnd }}Ä‘</strong>
        </div>
    </div>
    {% endfor %}
    
    <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #e5e7eb;">
        <div class="info-row">
            <span class="info-label">PhÃ­ váº­n chuyá»ƒn:</span>
            <span class="info-value">{{ order.shipping_fee|floatformat:0|vnd }}Ä‘</span>
        </div>
    </div>
    
    <div style="font-size: 22px; font-weight: bold; color: #667eea; margin-top: 15px; padding-top: 15px; border-top: 2px solid #e0e7ff; text-align: right;">
        Tá»•ng cá»™ng: {{ order.total_amount|floatformat:0|vnd }}Ä‘
    </div>
</div>

{% if order.notes %}
<div class="info-box">
    <h3>ğŸ’¬ Ghi chÃº tá»« khÃ¡ch hÃ ng</h3>
    <div style="background: #f8fafc; padding: 15px; border-radius: 6px; border-left: 3px solid #667eea;">
        {{ order.notes|linebreaks }}
    </div>
</div>
{% endif %}

<div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 20px; margin: 25px 0; border-radius: 8px;">
    <p style="margin: 0; color: #92400e; font-size: 16px; line-height: 1.8;">
        <strong>âš ï¸ HÃ nh Ä‘á»™ng cáº§n thiáº¿t:</strong> Vui lÃ²ng truy cáº­p trang quáº£n trá»‹ Ä‘á»ƒ xem chi tiáº¿t vÃ  xá»­ lÃ½ Ä‘Æ¡n hÃ ng nÃ y. 
        Äáº£m báº£o kiá»ƒm tra thÃ´ng tin khÃ¡ch hÃ ng vÃ  sáº£n pháº©m trÆ°á»›c khi xá»­ lÃ½.
    </p>
</div>

<div style="text-align: center; margin: 30px 0;">
    <a href="http://localhost:8000/admin/shop/order/{{ order.id }}/change/" class="action-button">
        ğŸ”— Xem chi tiáº¿t Ä‘Æ¡n hÃ ng trong Admin
    </a>
</div>

<p style="text-align: center; color: #6b7280; margin-top: 30px; font-size: 15px; line-height: 1.8;">
    <strong>TrÃ¢n trá»ng,</strong><br>
    <strong style="color: #667eea;">Há»‡ thá»‘ng DBP Sports</strong>
</p>
{% endblock %}

