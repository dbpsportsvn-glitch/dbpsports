{% extends 'emails/base_email.html' %}
{% load shop_filters %}

{% block title %}Cảm ơn quý khách - Đơn hàng #{{ order.order_number }} - DBP Sports{% endblock %}

{% block header_subtitle %}Trân trọng cảm ơn quý khách{% endblock %}

{% block content %}
<div class="success-box">
    <h2>🎉 Trân trọng cảm ơn quý khách!</h2>
    <p>Đơn hàng #{{ order.order_number }} đã hoàn tất</p>
</div>

<p style="font-size: 16px; color: #374151;">
    Kính gửi quý khách <strong>{{ order.customer_name }}</strong>,
</p>

<p style="color: #6b7280; line-height: 1.8;">
    Ngoài kia có rất nhiều sự lựa chọn có thể tốt hơn... Cảm ơn quý khách đã tin tưởng và lựa chọn sản phẩm của chúng tôi. 
    Đơn hàng <strong>{{ order.order_number }}</strong> của quý khách đã được hoàn tất.
</p>

<p style="color: #6b7280; line-height: 1.8;">
    Sự hài lòng của quý khách là niềm vinh hạnh và động lực để chúng tôi không ngừng phát triển, 
    mang đến những sản phẩm và dịch vụ tốt nhất.
</p>

<div class="info-box">
    <h3>📦 Thông tin đơn hàng</h3>
    <div class="info-row">
        <span class="info-label">Mã đơn hàng:</span>
        <span class="info-value"><strong>{{ order.order_number }}</strong></span>
    </div>
    <div class="info-row">
        <span class="info-label">Ngày đặt:</span>
        <span class="info-value">{{ order.created_at|date:"d/m/Y H:i" }}</span>
    </div>
    <div class="info-row">
        <span class="info-label">Trạng thái đơn hàng:</span>
        <span class="info-value"><span class="status-badge">Hoàn tất</span></span>
    </div>
    <div class="info-row">
        <span class="info-label">Phương thức thanh toán:</span>
        <span class="info-value">{{ order.get_payment_method_display }}</span>
    </div>
</div>

<div class="info-box">
    <h3>🛍️ Sản phẩm</h3>
    {% for item in order.items.all %}
    <div style="border-bottom: 1px solid #e5e7eb; padding: 15px 0;">
        <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">{{ item.product.name }}</div>
        <div style="color: #6b7280; font-size: 14px;">
            Số lượng: {{ item.quantity }} × {{ item.price|floatformat:0|vnd }}đ = 
            <strong>{{ item.total_price|floatformat:0|vnd }}đ</strong>
        </div>
    </div>
    {% endfor %}
    
    <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #e5e7eb;">
        <div class="info-row">
            <span class="info-label">Tạm tính:</span>
            <span class="info-value">{{ order.subtotal|floatformat:0|vnd }}đ</span>
        </div>
        <div class="info-row">
            <span class="info-label">Phí vận chuyển:</span>
            <span class="info-value">{{ order.shipping_fee|floatformat:0|vnd }}đ</span>
        </div>
    </div>
    
    <div style="font-size: 22px; font-weight: bold; color: #667eea; margin-top: 15px; padding-top: 15px; border-top: 2px solid #e0e7ff; text-align: right;">
        Tổng cộng: {{ order.total_amount|floatformat:0|vnd }}đ
    </div>
</div>

<div class="info-box">
    <h3>🚚 Địa chỉ giao hàng</h3>
    <div class="info-row">
        <span class="info-label">Người nhận:</span>
        <span class="info-value">{{ order.customer_name }}</span>
    </div>
    <div class="info-row">
        <span class="info-label">Điện thoại:</span>
        <span class="info-value">{{ order.customer_phone }}</span>
    </div>
    <div class="info-row">
        <span class="info-label">Địa chỉ:</span>
        <span class="info-value">{{ order.shipping_address }}, {{ order.shipping_district }}, {{ order.shipping_city }}</span>
    </div>
</div>

<div style="background: #f0fdf4; border-left: 4px solid #059669; padding: 20px; margin: 25px 0; border-radius: 8px; text-align: center;">
    <p style="margin: 0; color: #065f46; font-size: 16px; line-height: 1.8;">
        Rất mong được tiếp tục phục vụ quý khách trong tương lai.<br>
        Chúc quý khách luôn khỏe mạnh và thành công! 🏆
    </p>
</div>

<p style="text-align: center; color: #6b7280; margin-top: 30px; font-size: 15px; line-height: 1.8;">
    <strong>Trân trọng,</strong><br>
    <strong style="color: #667eea;">Đội ngũ DBP Sports</strong>
</p>

<div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
    <p style="margin: 5px 0; color: #9ca3af; font-size: 14px;">
        📞 Nếu cần hỗ trợ, vui lòng liên hệ hotline hoặc email của chúng tôi
    </p>
</div>
{% endblock %}