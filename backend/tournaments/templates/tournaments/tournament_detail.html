{% extends 'base.html' %}

{% block title %}{{ tournament.name }}{% endblock %}

{% block content %}
    <div class="mt-4">
        <h1>{{ tournament.name }}</h1>
        <p class="lead">Thông tin chi tiết về giải đấu</p>
        <h3 class="mt-5">Lịch thi đấu</h3>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">Thời gian</th>
                        <th scope="col">Đội 1</th>
                        <th scope="col">Tỉ số</th>
                        <th scope="col">Đội 2</th>
                        <th scope="col">Địa điểm</th>
                    </tr>
                </thead>
                <tbody>
                    {% for match in matches %}
                        <tr>
                            <td>{{ match.match_time|date:"H:i, d/m/Y" }}</td>
                            <td>{{ match.team1.name }}</td>
                            <td>
                                {% if match.team1_score is not None and match.team2_score is not None %}
                                    {{ match.team1_score }} - {{ match.team2_score }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                            <td>{{ match.team2.name }}</td>
                            <td>{{ match.location }}</td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="5" class="text-center">Lịch thi đấu đang được cập nhật.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <hr>
        <a href="{% url 'create_team' tournament_pk=tournament.pk %}" class="btn btn-success btn-lg mb-4">Đăng ký tham gia giải đấu</a>
        <div class="row">
            <div class="col-md-8">
                <p><strong>Ngày bắt đầu:</strong> {{ tournament.start_date|date:"d/m/Y" }}</p>
                <p><strong>Ngày kết thúc:</strong> {{ tournament.end_date|date:"d/m/Y" }}</p>

                <h3 class="mt-4">Các đội tham gia</h3>
                <h3 class="mt-4">Các đội tham gia</h3>
<div class="row">
    {% if tournament.teams.all %}
        {% for team in tournament.teams.all %}
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{ team.name }}</h5>
                        <p class="card-text">
                            {% if team.coach_name %}
                                <strong>HLV:</strong> {{ team.coach_name }}
                            {% endif %}
                        </p>
                        <a href="{% url 'team_detail' pk=team.pk %}" class="btn btn-secondary btn-sm">Xem chi tiết đội</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="col">
            <p>Chưa có đội nào đăng ký cho giải đấu này.</p>
        </div>
    {% endif %}
</div>
            </div>
        </div>
    </div>
{% endblock %}