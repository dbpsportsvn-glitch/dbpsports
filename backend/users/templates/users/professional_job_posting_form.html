{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}{% if is_edit %}Chỉnh sửa tin{% else %}Đăng tin tìm việc{% endif %}{% endblock %}

{% block extra_css %}
<style>
:root {
  --primary: #dc2626;
  --primary-dark: #b91c1c;
  --secondary: #6b7280;
  --success: #16a34a;
  --danger: #dc2626;
  --warning: #f59e0b;
  --info: #0ea5e9;
  --light: #f8fafc;
  --dark: #1f2937;
  --gradient-primary: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  --gradient-hero: linear-gradient(135deg, #f59e0b 0%, #dc2626 50%, #b91c1c 100%);
  --shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  --border-radius: 0.5rem;
  --border-radius-lg: 1rem;
}

.hero-section {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
}

.form-check-input:checked {
  background-color: #dc2626;
  border-color: #dc2626;
}

.form-check-input:focus {
  box-shadow: 0 0 0 0.25rem rgba(220, 38, 38, 0.25);
}

.form-section {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.section-title {
  color: #495057;
  font-weight: 600;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-lg {
  padding: 0.75rem 1.5rem;
  font-size: 1.1rem;
  border-radius: 8px;
}

.alert {
  border-radius: 8px;
  border: none;
}

.card {
  border: none;
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
  border-radius: 12px;
}

.card:hover {
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  transition: box-shadow 0.15s ease-in-out;
}

.stats-box {
  backdrop-filter: blur(10px);
}

.dashboard-stats {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 1rem;
}

.stat-item {
  text-align: center;
  padding: 0.5rem;
}

.stat-number {
  font-size: 1.5rem;
  font-weight: bold;
  color: #fff;
}

.stat-label {
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.8);
}

/* Responsive */
@media (max-width: 768px) {
  .hero-section {
    padding: 1rem !important;
  }
  
  .form-section {
    padding: 1rem;
  }
  
  .dashboard-stats {
    margin-top: 1rem;
  }
}
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section text-white py-5 mb-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="d-flex align-items-center mb-3">
                    <i class="bi bi-briefcase me-3" style="font-size: 3rem;"></i>
                    <div>
                        <h1 class="display-6 fw-bold mb-2">
                            {% if is_edit %}Chỉnh sửa tin tìm việc{% else %}Đăng tin tìm việc{% endif %}
                        </h1>
                        <p class="lead mb-0">Tìm kiếm cơ hội việc làm phù hợp với chuyên môn của bạn</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="dashboard-stats">
                    <div class="row g-3">
                        <div class="col-4">
                            <div class="stat-item">
                                <div class="stat-number">{{ user_roles.count|default:0 }}</div>
                                <div class="stat-label">Vai trò</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="stat-item">
                                <div class="stat-number">1</div>
                                <div class="stat-label">Tin đăng</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="stat-item">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Ứng tuyển</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="bi bi-briefcase me-2"></i>
                        {% if is_edit %}Chỉnh sửa tin tìm việc{% else %}Đăng tin tìm việc{% endif %}
                    </h4>
                </div>
                <div class="card-body">
                    {% if not is_edit %}
                    <div class="alert alert-info mb-4">
                        <i class="bi bi-info-circle me-2"></i>
                        <strong>Hướng dẫn:</strong> Hãy mô tả rõ ràng kỹ năng, kinh nghiệm và loại công việc bạn đang tìm kiếm. Các BTC, Sân bóng và tổ chức khác sẽ thấy tin của bạn và gửi lời mời hợp tác.
                    </div>
                    {% endif %}

                    <form method="post">
                        {% csrf_token %}
                        
                        <div class="form-section">
                            <h5 class="section-title">
                                <i class="bi bi-briefcase text-primary"></i>
                                Thông tin công việc mong muốn
                            </h5>
                            
                            {{ form.title|as_crispy_field }}
                            {{ form.role_required|as_crispy_field }}
                            
                            <div class="row">
                                <div class="col-md-6">
                                    {{ form.location_detail|as_crispy_field }}
                                </div>
                                <div class="col-md-6">
                                    {{ form.budget|as_crispy_field }}
                                </div>
                            </div>
                            
                            {{ form.description|as_crispy_field }}
                        </div>
                        
                        <div class="form-section">
                            <h5 class="section-title">
                                <i class="bi bi-exclamation-triangle text-warning"></i>
                                Lưu ý quan trọng
                            </h5>
                            
                            <div class="alert alert-warning">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="bi bi-check-circle text-success me-2"></i>
                                            <span>Kinh nghiệm & kỹ năng</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="bi bi-check-circle text-success me-2"></i>
                                            <span>Thời gian làm việc</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="bi bi-check-circle text-success me-2"></i>
                                            <span>Mức phí hợp lý</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">
                                {% if is_edit %}
                                    <i class="bi bi-check-circle me-2"></i>Cập nhật tin
                                {% else %}
                                    <i class="bi bi-megaphone me-2"></i>Đăng tin
                                {% endif %}
                            </button>
                            <a href="{% url 'professional_dashboard' %}" class="btn btn-outline-secondary btn-lg">
                                <i class="bi bi-arrow-left me-2"></i>Quay lại
                            </a>
                        </div>
                    </form>
                </div>
            </div>
            
            {# Hiển thị vai trò hiện tại #}
            <div class="card shadow-sm mt-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-person-badge me-2"></i>Vai trò chuyên môn của bạn
                    </h5>
                </div>
                <div class="card-body">
                    <div class="form-section">
                        <h6 class="section-title">
                            <i class="bi bi-award text-info"></i>
                            Các vai trò có thể đăng tin
                        </h6>
                        
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            {% for role in user_roles %}
                                <span class="badge bg-primary fs-6 px-3 py-2">
                                    <i class="bi bi-check-circle me-1"></i>{{ role.name }}
                                </span>
                            {% endfor %}
                        </div>
                        
                        <div class="alert alert-light">
                            <i class="bi bi-info-circle me-2"></i>
                            <strong>Lưu ý:</strong> Bạn chỉ có thể đăng tin tìm việc cho các vai trò này. Để thêm vai trò mới, vui lòng cập nhật trong phần Hồ sơ Công khai.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

