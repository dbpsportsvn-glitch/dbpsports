{% load static %}
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}DBP Sports{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/custom.css' %}">
  <link rel="stylesheet" href="{% static 'css/site.css' %}">

  <style>
    /* Header */
    .site-header .container{display:flex;align-items:center;gap:16px;padding:.9rem 0}
    .site-header .brand{display:flex;align-items:center;gap:.5rem;text-decoration:none;font-weight:700;color:#fff}
    .site-header .brand img{height:28px;width:auto}
    .site-header .nav{margin:0 !important}
    .site-header .nav .nav-link{padding:.6rem .8rem;color:rgba(255,255,255,.85)}
    .site-header .nav .nav-link:hover{color:#fff}
    .site-header .nav .nav-link.active{color:#fff;background:rgba(13,110,253,.25);border-radius:.6rem}
    .site-header .dropdown-toggle::after{display:none}
    .avatar-ph{display:inline-grid;place-items:center;width:28px;height:28px;border-radius:50%;
               background:#6f42c1;color:#fff;font-weight:700;font-size:.9rem}
  </style>
</head>
<body>

<header class="site-header bg-dark text-light">
  <div class="container">

    <!-- logo -->
    <a class="brand" href="{% url 'home' %}">
      <img src="{% static 'images/logo.png' %}" alt="DBP Sports"> DBP Sports
    </a>

    <!-- menu giữa -->
    <nav class="flex-grow-1">
      <ul class="nav justify-content-center gap-3">
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}" href="{% url 'home' %}">Trang chủ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'tournaments_active' %}active{% endif %}"
            href="{% url 'tournaments_active' %}">Giải đấu</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'livestream' %}active{% endif %}" href="{% url 'livestream' %}">Livestream</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'archive' %}active{% endif %}" href="{% url 'archive' %}">Lưu trữ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'shop' %}active{% endif %}" href="{% url 'shop' %}">Shop</a>
        </li>
      </ul>
    </nav>

    <!-- khu người dùng bên phải -->
    {% if user.is_authenticated %}
      <div class="dropdown ms-auto">
        <a href="#" class="d-flex align-items-center gap-2 text-decoration-none dropdown-toggle text-light"
           data-bs-toggle="dropdown" aria-expanded="false">
          {% with acct=user.socialaccount_set.first %}
            {% if acct and acct.get_avatar_url %}
              <img src="{{ acct.get_avatar_url }}" alt="" class="rounded-circle" style="width:28px;height:28px;object-fit:cover">
            {% else %}
              <span class="avatar-ph">{{ user.email|default:user.username|first|upper }}</span>
            {% endif %}
          {% endwith %}
          <span class="small">{{ user.email|default:user.username }}</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow">
          <li><a class="dropdown-item" href="{% url 'dashboard' %}">QL Đội Bóng</a></li>
          <li><a class="dropdown-item" href="{% url 'account_email' %}">Đổi email</a></li>
          <li><a class="dropdown-item" href="{% url 'account_change_password' %}">Đổi mật khẩu</a></li>
          <li><a class="dropdown-item" href="{% url 'socialaccount_connections' %}">Kết nối tài khoản</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="{% url 'account_logout' %}">Đăng xuất</a></li>
        </ul>
      </div>
    {% else %}
      <div class="ms-auto d-flex align-items-center gap-2">
        <a class="nav-link text-light" href="{% url 'account_login' %}">Đăng nhập</a>
        <a class="nav-link text-light" href="{% url 'account_signup' %}">Đăng ký</a>
      </div>
    {% endif %}

  </div>
</header>

{% block hero %}{% endblock %}

<div class="container mt-4">
  <main>
    {% block content %}{% endblock %}
  </main>

  <footer class="pt-4 my-md-5 pt-md-5 border-top">
    <div class="row">
      <div class="col-12 col-md">
        <small class="d-block mb-3 text-muted">&copy; 2025 DBP Sports</small>
      </div>
    </div>
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
